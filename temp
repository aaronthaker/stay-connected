import tkinter as tk
from tkinter import ttk
import difflib

def read_file(filename):
    with open(filename, 'r') as file:
        return file.readlines()

def calculate_diff(old_lines, new_lines):
    d = difflib.Differ()
    diff = list(d.compare(old_lines, new_lines))
    return diff

def highlight_diff(diff):
    for line in diff:
        tag = None
        if line.startswith('+ '):
            tag = 'added'
        elif line.startswith('- '):
            tag = 'removed'
        elif line.startswith('? '):
            continue  # Ignore lines indicating positions

        output_box.insert(tk.END, line + '\n', tag)

def create_text_widget(parent):
    text_widget = tk.Text(parent, wrap='word')
    
    # Define tag styles
    text_widget.tag_config('added', background='lightgreen')
    text_widget.tag_config('removed', background='salmon')

    return text_widget

def main():
    old_lines = read_file('old.txt')
    new_lines = read_file('july.txt')
    diff = calculate_diff(old_lines, new_lines)

    # Initialize the Tkinter root window
    root = tk.Tk()
    root.title("File Differences")

    global output_box
    output_box = create_text_widget(root)
    output_box.pack(expand=True, fill=tk.BOTH)

    highlight_diff(diff)

    # Run the application
    root.mainloop()

if __name__ == '__main__':
    main()
