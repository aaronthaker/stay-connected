def calculate_balanced_arbitrage(exchange_odds, exchange_liquidity, commission, bookmaker_odds):
    """
    Calculate the optimal bookmaker stake that ensures the same profit regardless of the outcome.
    
    :param exchange_odds: The lay odds available at the exchange.
    :param exchange_liquidity: The maximum amount that can be matched on the exchange.
    :param commission: The exchange commission percentage (e.g., 2 for Betfair -> input 2).
    :param bookmaker_odds: The odds available at the bookmaker for backing the bet.
    :return: Recommended bookmaker stake, lay stake, and guaranteed profit.
    """

    # Adjust for exchange commission
    commission_multiplier = (1 - (commission / 100))

    # Maximum lay stake we can place based on exchange liquidity
    max_lay_stake = exchange_liquidity

    # Initial bookmaker stake calculation (before profit equalization)
    bookmaker_stake = (max_lay_stake * exchange_odds) / bookmaker_odds

    # Calculate lay liability
    lay_liability = max_lay_stake * (exchange_odds - 1)

    # Calculate profit if bookmaker bet wins
    bookmaker_payout = bookmaker_stake * bookmaker_odds
    profit_if_win = bookmaker_payout - bookmaker_stake - lay_liability

    # Calculate profit if bookmaker bet loses (winning the lay bet)
    profit_if_lose = max_lay_stake * commission_multiplier - bookmaker_stake

    # Adjust bookmaker stake to equalize profits
    if commission > 0:
        bookmaker_stake *= (1 / commission_multiplier)

        # Recalculate profits with adjusted stake
        bookmaker_payout = bookmaker_stake * bookmaker_odds
        lay_stake = bookmaker_payout / exchange_odds
        lay_liability = lay_stake * (exchange_odds - 1)

        profit_if_win = bookmaker_payout - bookmaker_stake - lay_liability
        profit_if_lose = lay_stake * commission_multiplier - bookmaker_stake

    # Guaranteed Equal Profit
    guaranteed_profit = min(profit_if_win, profit_if_lose)

    # Print Results
    print("\n--- Adjusted Arbitrage Betting Breakdown ---")
    print(f"âœ… Adjusted Bookmaker Stake: ${bookmaker_stake:.2f} at {bookmaker_odds:.2f} odds")
    print(f"âœ… Exchange Lay Stake: ${max_lay_stake:.2f} at {exchange_odds:.2f} odds")
    print(f"ðŸ“‰ Lay Liability: ${lay_liability:.2f}")
    print(f"ðŸ’° Profit if Bet Wins: ${profit_if_win:.2f}")
    print(f"ðŸ’° Profit if Bet Loses: ${profit_if_lose:.2f}")
    print(f"ðŸŽ¯ Guaranteed Equal Profit: ${guaranteed_profit:.2f}")

# User Inputs
exchange_odds = float(input("Enter exchange lay odds: "))
exchange_liquidity = float(input("Enter available exchange liquidity ($): "))
commission = float(input("Enter exchange commission percentage (e.g., 2 for 2%): "))
bookmaker_odds = float(input("Enter bookmaker odds: "))

# Calculate balanced arbitrage strategy
calculate_balanced_arbitrage(exchange_odds, exchange_liquidity, commission, bookmaker_odds)